<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout}">

<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" th:href="@{/css/record/record.css}">
	<title>筋トレカレンダー</title>
	<link href='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css' rel='stylesheet' />
	<script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js'></script>
</head>

<body>
	<div layout:fragment="content">
		<div id='calendar'></div>

		<script th:inline="javascript">
			document.addEventListener('DOMContentLoaded', function () {
				var calendarEl = document.getElementById('calendar');

				var events = /*[[${eventsJson}]]*/[];
				console.log("Events loaded: ", events); // デバッグ用に追加
				
				var calendar = new FullCalendar.Calendar(calendarEl, {
					initialView: "dayGridMonth",
					events: events,
					eventClick: function (info) {
						var clickedDate = info.event.startStr;
						window.location.href = '/training/dashboard?searchName=' + clickedDate;
					}
				});
				calendar.render();
			});
		</script>
	</div>
</body>

</html>