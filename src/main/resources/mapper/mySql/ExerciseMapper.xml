<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- Mapperとxmlのマッピング -->
<mapper namespace="com.example.repository.ExerciseMapper">

<resultMap type="com.example.domain.model.ExerciseRecord" id="record">
<id column="user_id" property="userId"/>
<id column="body_part_id" property="bodyPartId"/>
<id column="exercise_id" property="exerciseId"/>
<id column="date" property="date"/>
<id column="weight" property="weight"/>
<id column="reps" property="reps"/>
<association property="exercise" resultMap="exercise"/>
<collection property="bodyParts" resultMap="bodyParts"/>
</resultMap>

<!-- マッピング定義（種目） -->
<resultMap type="com.example.domain.model.Exercise" id="exercise">
	<id column="id" property="id"/>
	<result column="name" property="name"/>
	<result column="body_part_id" property="bodyPartId"/>
	<result column="weight_based" property="weightBased"/>
	</resultMap>

<!-- 部位複数件取得 -->
<select id = "findBodyParts" resultType="BodyParts">
SELECT
	*
FROM
	training.body_parts
</select>

<!-- 筋トレ種目複数件取得 -->
<select id="getExercisesByBodyPart" resultType="Exercise">
SELECT
	id,name
FROM
	training.exercises
WHERE
	body_part_id=#{bodyPartId}
</select>

<select id="findWeightBased" resultType="int">
SELECT
	weight_based
FROM 
	training.exercises
WHERE
	id=#{exerciseId}
</select>

<insert id="recordExerciseData">
	insert into training.exercise_records(
		user_id
		,body_part_id
		,exercise_id
		,date
		,weight
		,reps
		)
		values(
		#{userId}
		,#{
		,#{exerciseId}
		,#{date}
		,#{weight}
		,#{reps}
		)
</insert>

<select id="findExerciseData"


</mapper>